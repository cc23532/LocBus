<!DOCTYPE html>
<html>
<head>
    <title>Meu Mapa</title>
    <style>
        #map {
            height: 400px;
            width: 50%;
        }
    </style>
</head>
<body>
    <div id="map"></div>

    <script>
        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                center: { lat: -22.96793034203473, lng: -46.995350186264304 },
                zoom: 16
            });

            <% for (let i = 0; i < pontos.length; i++) { %>
                createMarker(map, <%= pontos[i].lat %>, <%= pontos[i].lon %>, '<%= pontos[i].logradouro %>', '<%= i+1 %>');
            <% } %>
    
            function createMarker(map, lat, lon, title, idPonto) {
                var infowindow = new google.maps.InfoWindow();
    
                var marker = new google.maps.Marker({
                    position: { lat: lat, lng: lon },
                    map: map,
                    title: title,
                    icon: {
                        url: '../assets/imgs/icon-bus-stop.png',
                        scaledSize: new google.maps.Size(18, 18)
                    }
                });
    
                marker.addListener('click', function () {
                    var content = '<h3>' + title + '</h3>';
                    content += '<p><a href="/horariosPonto?idPonto=' + idPonto + '">Ver hor√°rios</a></p>';

                    infowindow.setContent(content);
                    infowindow.open(map, marker);
                });
            }
        }
    </script>
    
    

<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCzGJHcT9GwLSLre5lNgyS0RmaqaA6R8IQ&callback=initMap" async defer></script>
</body>
</html>
